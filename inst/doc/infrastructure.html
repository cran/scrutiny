<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>General infrastructure</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">

div.csl-bib-body { }
div.csl-entry {
clear: both;
}
.hanging div.csl-entry {
margin-left:2em;
text-indent:-2em;
}
div.csl-left-margin {
min-width:2em;
float:left;
}
div.csl-right-inline {
margin-left:2em;
padding-left:1em;
}
div.csl-indent {
margin-left: 2em;
}
</style>

<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">General infrastructure</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(scrutiny)</span></code></pre></div>
<p>The implementation of error detection techniques in scrutiny rests on
a foundation of specialized helper functions. Some of these are exported
because they might be helpful in error detection more broadly, or
perhaps even in other contexts.</p>
<p>This vignette provides an overview of scrutiny’s miscellaneous
infrastructure for implementing error detection techniques. For more
specific articles, see <code>vignette(&quot;rounding&quot;)</code> or
<code>vignette(&quot;consistency-tests&quot;)</code>.</p>
<div id="count-decimal-places" class="section level2">
<h2>Count decimal places</h2>
<p>Large parts of the package ultimately rest on either of two functions
that simply count decimal places. These are digits after a number’s
decimal point or some other separator. Both functions also take
strings.</p>
<p><code>decimal_places()</code> is vectorized:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">decimal_places</span>(<span class="st">&quot;2.80&quot;</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="fu">decimal_places</span>(<span class="fu">c</span>(<span class="fl">55.1</span>, <span class="fl">6.493</span>, <span class="dv">8</span>))</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#&gt; [1] 1 3 0</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>vec1 <span class="ot">&lt;-</span> iris <span class="sc">%&gt;%</span> </span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">pull</span>(Sepal.Length)</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>vec1</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co">#&gt;  [1] 5.1 4.9 4.7 4.6 5.0 5.4 4.6 5.0 4.4 4.9</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>vec1 <span class="sc">%&gt;%</span> </span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>  <span class="fu">decimal_places</span>()</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="co">#&gt;  [1] 1 1 1 1 0 1 1 0 1 1</span></span></code></pre></div>
<p>Using strings (that are coercible to numeric) is recommended in an
error detection context because trailing zeros can be crucial here.
Numeric values drop trailing zeros, whereas strings preserve them:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">decimal_places</span>(<span class="fl">7.200</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">decimal_places</span>(<span class="st">&quot;7.200&quot;</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p><code>decimal_places_scalar()</code> is faster than
<code>decimal_places()</code> but only takes a single number or string.
This makes it suitable as a helper within other single-case
functions.</p>
</div>
<div id="restore-trailing-zeros" class="section level2">
<h2>Restore trailing zeros</h2>
<p>When dealing with numbers that used to have trailing zeros but lost
them from being registered as numeric, call <code>restore_zeros()</code>
to format them correctly. This can be relevant within functions that
create vectors where trailing zeros matter, such as the
<code>seq_*()</code> functions presented in the next section.</p>
<p>Suppose all of the following numbers originally had one decimal
place, but some no longer do:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>vec2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="fl">6.9</span>, <span class="dv">5</span>, <span class="fl">4.2</span>, <span class="fl">4.8</span>, <span class="dv">7</span>, <span class="dv">4</span>)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>vec2 <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="fu">decimal_places</span>()</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co">#&gt; [1] 0 1 0 1 1 0 0</span></span></code></pre></div>
<p>Now, get them back with <code>restore_zeros()</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>vec2 <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="fu">restore_zeros</span>()</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4.0&quot; &quot;6.9&quot; &quot;5.0&quot; &quot;4.2&quot; &quot;4.8&quot; &quot;7.0&quot; &quot;4.0&quot;</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>vec2 <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="fu">restore_zeros</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="fu">decimal_places</span>()</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="co">#&gt; [1] 1 1 1 1 1 1 1</span></span></code></pre></div>
<p>This uses the default of going by the longest mantissa and padding
the other strings with decimal zeros until they have that many decimal
places. However, this is just a heuristic: The longest mantissa might
itself have lost decimal places. Specify the <code>width</code> argument
to explicitly state the desired mantissa length:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>vec2 <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="fu">restore_zeros</span>(<span class="at">width =</span> <span class="dv">2</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4.00&quot; &quot;6.90&quot; &quot;5.00&quot; &quot;4.20&quot; &quot;4.80&quot; &quot;7.00&quot; &quot;4.00&quot;</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>vec2 <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="fu">restore_zeros</span>(<span class="at">width =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="fu">decimal_places</span>()</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt; [1] 2 2 2 2 2 2 2</span></span></code></pre></div>
</div>
<div id="sequence-generation" class="section level2">
<h2>Sequence generation</h2>
<div id="introduction" class="section level3">
<h3>Introduction</h3>
<p><code>base::seq()</code> offers a flexible way to generate sequences,
but it is not cut out for working with decimal numbers. The
<code>by</code> argument only allows for manual specifications of the
step size, i.e., the difference between two consecutive output values.
In an error detection context, there is also the problem of trailing
zeros in numeric values.</p>
<p>Use scrutiny’s <code>seq_*()</code> functions to automatically
determine step size from the input numbers and, by default, to supply
missing trailing zeros via <code>restore_zeros()</code>. Output will
then naturally be string.</p>
<p>Why are there multiple such functions? The first two disentangle the
two different ways in which <code>seq()</code> can be used. A third
function adds a way of generating sequences not directly covered by
<code>seq()</code>.</p>
<ul>
<li><p><code>seq_endpoint()</code> takes two main arguments,
<code>from</code> and <code>to</code>. It creates a sequence between the
two, inferring step size from the greater number of decimal places among
them. This corresponds to a <code>seq()</code> call in which
<code>to</code> was specified.</p></li>
<li><p><code>seq_distance()</code> takes a <code>from</code> argument,
uses it to infer the step size, and creates a sequence of a length
specified by the <code>length_out</code> argument (default is
<code>10</code>). This corresponds to a <code>seq()</code> call in which
<code>length.out</code> was specified.</p></li>
<li><p>Finally, <code>seq_disperse()</code> creates a sequence centered
around <code>from</code>.</p></li>
</ul>
<p>Each of these functions has a <code>*_df()</code> variant that embeds
the sequence as a tibble column.</p>
</div>
<div id="examples" class="section level3">
<h3>Examples</h3>
<p>The <code>seq_*()</code> functions have some more features, such as
offsets and direction reversal, but I’ll focus on the basics here.</p>
<p>Call <code>seq_endpoint()</code> to bridge two numbers at the correct
decimal level:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">seq_endpoint</span>(<span class="at">from =</span> <span class="fl">4.1</span>, <span class="at">to =</span> <span class="dv">6</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;4.1&quot; &quot;4.2&quot; &quot;4.3&quot; &quot;4.4&quot; &quot;4.5&quot; &quot;4.6&quot; &quot;4.7&quot; &quot;4.8&quot; &quot;4.9&quot; &quot;5.0&quot; &quot;5.1&quot; &quot;5.2&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt; [13] &quot;5.3&quot; &quot;5.4&quot; &quot;5.5&quot; &quot;5.6&quot; &quot;5.7&quot; &quot;5.8&quot; &quot;5.9&quot; &quot;6.0&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">seq_endpoint</span>(<span class="at">from =</span> <span class="fl">4.1</span>, <span class="at">to =</span> <span class="fl">4.15</span>)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4.10&quot; &quot;4.11&quot; &quot;4.12&quot; &quot;4.13&quot; &quot;4.14&quot; &quot;4.15&quot;</span></span></code></pre></div>
<p>Call <code>seq_distance()</code> to get a sequence of desired
length:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">seq_distance</span>(<span class="at">from =</span> <span class="fl">4.1</span>, <span class="at">length_out =</span> <span class="dv">3</span>)</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;4.1&quot; &quot;4.2&quot; &quot;4.3&quot;</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># Default for `length_out` is `10`:</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">seq_distance</span>(<span class="at">from =</span> <span class="fl">4.1</span>)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;4.1&quot; &quot;4.2&quot; &quot;4.3&quot; &quot;4.4&quot; &quot;4.5&quot; &quot;4.6&quot; &quot;4.7&quot; &quot;4.8&quot; &quot;4.9&quot; &quot;5.0&quot;</span></span></code></pre></div>
<p>Finally, call <code>seq_disperse()</code> to construct a sequence
around <code>from</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">seq_disperse</span>(<span class="at">from =</span> <span class="fl">4.1</span>, <span class="at">dispersion =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;3.8&quot; &quot;3.9&quot; &quot;4.0&quot; &quot;4.1&quot; &quot;4.2&quot; &quot;4.3&quot; &quot;4.4&quot;</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Default for `dispersion` if `1:5`:</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">seq_disperse</span>(<span class="at">from =</span> <span class="fl">4.1</span>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;3.6&quot; &quot;3.7&quot; &quot;3.8&quot; &quot;3.9&quot; &quot;4.0&quot; &quot;4.1&quot; &quot;4.2&quot; &quot;4.3&quot; &quot;4.4&quot; &quot;4.5&quot; &quot;4.6&quot;</span></span></code></pre></div>
<p><code>seq_disperse()</code> is a hybrid between the two
<code>seq()</code> wrappers explained above and the
<code>disperse*()</code> functions introduced next.</p>
</div>
</div>
<div id="sequence-testing" class="section level2">
<h2>Sequence testing</h2>
<div id="general-points" class="section level3">
<h3>General points</h3>
<p>Four predicate functions test whether a vector <code>x</code>
represents particular kinds of sequences. These testing functions can be
used as helpers, but they are also analytic tools in their own
right.</p>
<p><code>is_seq_linear()</code> returns <code>TRUE</code> if the
difference between all neighboring values is the same:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>, <span class="dv">16</span>))</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>, <span class="dv">17</span>))</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p><code>is_seq_ascending()</code> tests whether that difference is
always positive…</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">is_seq_ascending</span>(<span class="at">x =</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">is_seq_ascending</span>(<span class="at">x =</span> <span class="dv">15</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co"># Default also tests for linearity:</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">is_seq_ascending</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>, <span class="dv">17</span>))</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="fu">is_seq_ascending</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>, <span class="dv">17</span>), <span class="at">test_linear =</span> <span class="cn">FALSE</span>)</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>…whereas <code>is_seq_descending()</code> tests whether it is always
negative:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">is_seq_descending</span>(<span class="at">x =</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">15</span>)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">is_seq_descending</span>(<span class="at">x =</span> <span class="dv">15</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co"># Default also tests for linearity:</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="fu">is_seq_descending</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">15</span><span class="sc">:</span><span class="dv">8</span>, <span class="dv">2</span>))</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="fu">is_seq_descending</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">15</span><span class="sc">:</span><span class="dv">8</span>, <span class="dv">2</span>), <span class="at">test_linear =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p><code>is_seq_dispersed()</code> tests whether the vector is grouped
around its <code>from</code> argument:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">from =</span> <span class="dv">2</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Direction doesn&#39;t matter here:</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co"># Dispersed from `50`, but not linear:</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>x_nonlinear <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">49</span>, <span class="dv">42</span>, <span class="dv">47</span>, <span class="dv">44</span>, <span class="dv">50</span>, <span class="dv">56</span>, <span class="dv">53</span>, <span class="dv">58</span>, <span class="dv">51</span>)</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co"># Default also tests for linearity:</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> x_nonlinear, <span class="at">from =</span> <span class="dv">50</span>)</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> x_nonlinear, <span class="at">from =</span> <span class="dv">50</span>, <span class="at">test_linear =</span> <span class="cn">FALSE</span>)</span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div id="na-handling" class="section level3">
<h3><code>NA</code> handling</h3>
<p>All the <code>is_seq_*()</code> functions take special care with
missing values. If one or more elements of <code>x</code> are
<code>NA</code>, this doesn’t necessarily mean that it’s unknown whether
or not <code>x</code> might possibly represent the kind of sequence in
question.</p>
<p>In these examples, it is genuinely unclear whether <code>x</code> is
linear:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>))</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">6</span>))</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>Linearity thus depends on the unknown, missing value behind
<code>NA</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">4</span>))</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">17</span>, <span class="dv">29</span>, <span class="dv">32</span>, <span class="dv">6</span>))</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Sometimes, however, <code>x</code> cannot possibly represent the
tested kind of sequence, independently of the hypothetical numbers
substituted for <code>NA</code> elements. In such cases, scrutiny’s
<code>is_seq_*()</code> functions will always return
<code>FALSE</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">10</span>))</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">10</span>))</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>This is very much in the spirit of consistency testing. Even if
certain data are unknown, it still makes sense to check whether or not
<em>any</em> data could possibly fill in the gaps. The
<code>is_seq_*()</code> functions effectively ask: Are the numbers left
and right of the <code>NA</code>s consistent with each other, given
their index positions?</p>
<p>It is worth emphasizing that this behavior is not exotic, or specific
to scrutiny. It simply asserts the fundamental ideas of <code>NA</code>
propagation in R. For example,
<code>is_seq_ascending(x = c(1, 2, NA, 1))</code> is <code>FALSE</code>
for the same reason that <code>NA &amp; FALSE</code> is
<code>FALSE</code>: The outcome is the same for all possible values of
<code>NA</code> <span class="citation">(Wickham 2019,
ch. 3.2.3)</span>.</p>
<p>Leading and trailing <code>NA</code>s are mostly ignored when
determining whether <code>x</code> <em>might</em> be the kind of
sequence in question:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">NA</span>))</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="fu">is_seq_linear</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>, <span class="cn">NA</span>))</span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>The only exception, <code>is_seq_dispersed()</code>, is particularly
sensitive to <code>NA</code> values:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># `TRUE` because `x` is symmetrically dispersed</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co"># from 5 and contains no `NA` values:</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>), <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="co"># `NA` because it might be dispersed from 5,</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co"># depending on the values hidden behind the `NA`s:</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>), <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="co"># `FALSE` because it&#39;s not symmetrically dispersed</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="co"># around 5, no matter what the `NA`s stand in for:</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>), <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>), <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a><span class="fu">is_seq_dispersed</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">7</span>), <span class="at">from =</span> <span class="dv">5</span>)</span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
</div>
<div id="disperse-from-around-half-with-disperse_total" class="section level2">
<h2>Disperse from (around) half with <code>disperse_total()</code></h2>
<p>Briefly, <code>disperse_total()</code> checks if an input total is
even or odd, cuts it in half, and creates “dispersed” group sizes going
out from there, with each pair of group sizes adding up to the input
total. This works naturally with even totals. For odd totals, it starts
with the two integers closest to half.</p>
<p>The function internally calls either of <code>disperse()</code> and
<code>disperse2()</code>, but I recommend simply using the higher-level
<code>disperse_total()</code>. Here are two basic examples:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># With an even total...</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">disperse_total</span>(<span class="at">n =</span> <span class="dv">70</span>)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12 × 2</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co">#&gt;        n n_change</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">#&gt;  1    35        0</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">#&gt;  2    35        0</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="co">#&gt;  3    34       -1</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co">#&gt;  4    36        1</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co">#&gt;  5    33       -2</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co">#&gt;  6    37        2</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="co">#&gt;  7    32       -3</span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co">#&gt;  8    38        3</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co">#&gt;  9    31       -4</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="co">#&gt; 10    39        4</span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co">#&gt; 11    30       -5</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co">#&gt; 12    40        5</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a><span class="co"># ...and with an odd total:</span></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a><span class="fu">disperse_total</span>(<span class="at">n =</span> <span class="dv">83</span>)</span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12 × 2</span></span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a><span class="co">#&gt;        n n_change</span></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a><span class="co">#&gt;  1    41        0</span></span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a><span class="co">#&gt;  2    42        0</span></span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a><span class="co">#&gt;  3    40       -1</span></span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a><span class="co">#&gt;  4    43        1</span></span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a><span class="co">#&gt;  5    39       -2</span></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a><span class="co">#&gt;  6    44        2</span></span>
<span id="cb19-30"><a href="#cb19-30" tabindex="-1"></a><span class="co">#&gt;  7    38       -3</span></span>
<span id="cb19-31"><a href="#cb19-31" tabindex="-1"></a><span class="co">#&gt;  8    45        3</span></span>
<span id="cb19-32"><a href="#cb19-32" tabindex="-1"></a><span class="co">#&gt;  9    37       -4</span></span>
<span id="cb19-33"><a href="#cb19-33" tabindex="-1"></a><span class="co">#&gt; 10    46        4</span></span>
<span id="cb19-34"><a href="#cb19-34" tabindex="-1"></a><span class="co">#&gt; 11    36       -5</span></span>
<span id="cb19-35"><a href="#cb19-35" tabindex="-1"></a><span class="co">#&gt; 12    47        5</span></span></code></pre></div>
</div>
<div id="test-for-subsets-supersets-and-equal-sets" class="section level2">
<h2>Test for subsets, supersets, and equal sets</h2>
<p>Starting with <code>is_subset_of()</code>, scrutiny features a
distinctive family of predicate functions that test whether one vector
<code>x</code> is a subset of another vector <code>y</code>, whether
<code>x</code> is a superset of <code>y</code> (i.e. the reverse of a
subset), or whether <code>x</code> and <code>y</code> are equal
sets.</p>
<p>As a teaser: These functions are divided into three subgroups based
on the way the second vector, <code>y</code>, is constituted. For
example, you might test if <code>x</code> is a subset of multiple other
vectors taken together, or a superset of a vector <code>y</code> that
consists of multiple values entered along with <code>x</code>.</p>
<p>Functions from this family are not currently used as helpers inside
other scrutiny functions, but that may well change. Use elsewhere is
also conceivable.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-wickham2019" class="csl-entry">
Wickham, Hadley. 2019. <em>Advanced r</em>. Second edition. Boca Raton:
CRC Press/Taylor; Francis Group.
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
